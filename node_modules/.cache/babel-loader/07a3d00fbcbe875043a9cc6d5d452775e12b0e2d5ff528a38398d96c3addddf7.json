{"ast":null,"code":"import _objectSpread from\"D:/PAD24-25-P3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import SearchBar from'./components/SearchBar';import BookList from'./components/BookList';import Categories from'./components/Categories';import{fetchBooks}from'./utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[books,setBooks]=useState([]);const[categorizedBooks,setCategorizedBooks]=useState({});const[recentSearches,setRecentSearches]=useState([]);const handleSearch=async query=>{const results=await fetchBooks(query);setBooks(results);const updatedSearches=[query,...recentSearches.slice(0,4)];setRecentSearches(updatedSearches);addRecentSearch(updatedSearches);localStorage.setItem('recentSearches',JSON.stringify(updatedSearches));};const handleCategorize=(book,genre)=>{if(!categorizedBooks[genre])categorizedBooks[genre]=[];categorizedBooks[genre].push(book);setCategorizedBooks(_objectSpread({},categorizedBooks));};useEffect(()=>{const fetchRecentSearches=async()=>{const searches=await getRecentSearches();setRecentSearches(searches);};fetchRecentSearches();},[]);const addRecentSearch=async search=>{if(navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({type:\"ADD_RECENT_SEARCH\",payload:search});}};const getRecentSearches=async()=>{return new Promise(resolve=>{if(navigator.serviceWorker.controller){const messageChannel=new MessageChannel();messageChannel.port1.onmessage=event=>resolve(event.data);navigator.serviceWorker.controller.postMessage({type:\"GET_RECENT_SEARCHES\"},[messageChannel.port2]);}else{resolve([]);}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearch})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(BookList,{books:books,onCategorize:handleCategorize})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Categories,{categorizedBooks:categorizedBooks})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h4\",children:\"B\\xFAsquedas recientes:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:recentSearches.map((search,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:search},index))})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","SearchBar","BookList","Categories","fetchBooks","jsx","_jsx","jsxs","_jsxs","App","books","setBooks","categorizedBooks","setCategorizedBooks","recentSearches","setRecentSearches","handleSearch","query","results","updatedSearches","slice","addRecentSearch","localStorage","setItem","JSON","stringify","handleCategorize","book","genre","push","_objectSpread","fetchRecentSearches","searches","getRecentSearches","search","navigator","serviceWorker","controller","postMessage","type","payload","Promise","resolve","messageChannel","MessageChannel","port1","onmessage","event","data","port2","className","children","onSearch","onCategorize","map","index"],"sources":["D:/PAD24-25-P3/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport SearchBar from './components/SearchBar';\r\nimport BookList from './components/BookList';\r\nimport Categories from './components/Categories';\r\nimport { fetchBooks } from './utils/api';\r\n\r\nconst App = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [categorizedBooks, setCategorizedBooks] = useState({});\r\n  const [recentSearches, setRecentSearches] = useState([]);\r\n\r\n  const handleSearch = async (query) => {\r\n    const results = await fetchBooks(query);\r\n    setBooks(results);\r\n\r\n    const updatedSearches = [query, ...recentSearches.slice(0, 4)];\r\n    setRecentSearches(updatedSearches);\r\n    addRecentSearch(updatedSearches)\r\n    localStorage.setItem('recentSearches', JSON.stringify(updatedSearches));\r\n  };\r\n\r\n  const handleCategorize = (book, genre) => {\r\n    if (!categorizedBooks[genre]) categorizedBooks[genre] = [];\r\n    categorizedBooks[genre].push(book);\r\n    setCategorizedBooks({ ...categorizedBooks });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchRecentSearches = async () => {\r\n      const searches = await getRecentSearches();\r\n      setRecentSearches(searches);\r\n    };\r\n    fetchRecentSearches();\r\n  }, []);\r\n\r\n  const addRecentSearch = async (search) => {\r\n    if (navigator.serviceWorker.controller) {\r\n      navigator.serviceWorker.controller.postMessage({\r\n        type: \"ADD_RECENT_SEARCH\",\r\n        payload: search,\r\n      });\r\n    }\r\n  };\r\n\r\n  const getRecentSearches = async () => {\r\n    return new Promise((resolve) => {\r\n      if (navigator.serviceWorker.controller) {\r\n        const messageChannel = new MessageChannel();\r\n        messageChannel.port1.onmessage = (event) => resolve(event.data);\r\n  \r\n        navigator.serviceWorker.controller.postMessage(\r\n          { type: \"GET_RECENT_SEARCHES\" },\r\n          [messageChannel.port2]\r\n        );\r\n      } else {\r\n        resolve([]);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container my-4\">\r\n      \r\n\r\n      <div className=\"mb-4\">\r\n        <SearchBar onSearch={handleSearch} />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <BookList books={books} onCategorize={handleCategorize} />\r\n      </div>\r\n\r\n      <div className=\"mb-4\">\r\n        <Categories categorizedBooks={categorizedBooks} />\r\n      </div>\r\n\r\n      <div>\r\n        <h2 className=\"h4\">BÃºsquedas recientes:</h2>\r\n        <ul className=\"list-group\">\r\n          {recentSearches.map((search, index) => (\r\n            <li key={index} className=\"list-group-item\">\r\n              {search}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}